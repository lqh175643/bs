import{_ as R,u as N,g as D,i as x,C as y,r as n,o as h,c as w,b,B as i,t as V,n as k,e as l,A as r,F as U,E,H as C,d as F,R as T}from"./index-8ec311e0.js";import{d as q,b as B}from"./userHome-97f96ce9.js";const S={name:"ReceiveAddr",props:{addrs:Object},setup(f){const o=N();let u=D(!1);const e=f.addrs,_=x({user:e.user||"",receivingAddress:y(e.receivingAddress)||"",phoneNumber:e.phoneNumber||"",email:e.email||"",head_add:y(e.receivingAddress).split("/")[0]||"",addr_id:e.addr_id||""});return{formData:_,addrDelete:()=>{q({target:"receivingAddress",val:{addr_id:_.addr_id}}).then(s=>{u.value=!1,E(o),C({message:"删除成功",type:"success",offset:60})},s=>{C({message:"删除失败",type:"error",offset:60})})},dialogVisible:u}}},O={class:"addr_wrapper"},I={class:"header"},M=b("span",null,"是否移除此地址",-1),P={class:"dialog-footer"};function j(f,o,u,e,_,g){const s=n("el-form-item"),v=n("el-form"),m=n("el-button"),A=n("el-dialog");return h(),w(U,null,[b("div",O,[b("div",I,[i(V(e.formData.user+" "+e.formData.head_add)+" ",1),b("i",{class:k(["iconfont","icon-guanbi","float_right"]),onClick:o[0]||(o[0]=p=>e.dialogVisible=!0)})]),l(v,{model:e.formData,class:"form"},{default:r(()=>[l(s,{label:"收货人 :"},{default:r(()=>[i(V(e.formData.user),1)]),_:1}),l(s,{label:"收货地址 :"},{default:r(()=>[i(V(e.formData.receivingAddress),1)]),_:1}),l(s,{label:"电话号码 :"},{default:r(()=>[i(V(e.formData.phoneNumber),1)]),_:1}),l(s,{label:"邮箱 :"},{default:r(()=>[i(V(e.formData.email),1)]),_:1})]),_:1},8,["model"])]),l(A,{modelValue:e.dialogVisible,"onUpdate:modelValue":o[2]||(o[2]=p=>e.dialogVisible=p),title:"确定移除",width:"30%"},{footer:r(()=>[b("span",P,[l(m,{onClick:o[1]||(o[1]=p=>e.dialogVisible=!1)},{default:r(()=>[i("取消")]),_:1}),l(m,{type:"primary",onClick:e.addrDelete},{default:r(()=>[i("确定")]),_:1},8,["onClick"])])]),default:r(()=>[M]),_:1},8,["modelValue"])],64)}const z=R(S,[["render",j]]);const H={name:"ReceivingAddress",components:{ReceiveAddr:z},setup(){let f=D(!1),o=D("新增收货地址");const u=N(),e=T,_=D(),g=x({user:"",receivingAddress:"",phoneNumber:"",email:""});function s(){_.value.validate(c=>{if(c)g.addr_id=Date.now(),B(g).then(t=>{f.value=!1,E(u),console.log(t)},t=>{console.log(t)});else return console.log("error submit!!"),!1})}return{dialogTableVisible:f,title:o,formData:g,rules:{user:[{validator:(c,t,a)=>{t===""?a(new Error("请输入收货人")):a()},trigger:"change"}],receivingAddress:[{validator:(c,t,a)=>{t===""?a(new Error("请选择收货地址")):a()},trigger:"change"}],phoneNumber:[{validator:(c,t,a)=>{t===""?a(new Error("请输入手机号码")):a()},trigger:"change"}],email:[{validator:(c,t,a)=>{t===""?a(new Error("请输入邮箱")):a()},trigger:"change"}]},ruleFormRef:_,submitForm:s,addressSelectOptions:e,store:u}}},L={class:"wrapper_recA"},G={class:"footer"};function J(f,o,u,e,_,g){var a;const s=n("el-button"),v=n("el-input"),m=n("el-form-item"),A=n("el-cascader"),p=n("el-form"),c=n("el-dialog"),t=n("ReceiveAddr");return h(),w("div",L,[l(s,{onClick:o[0]||(o[0]=d=>e.dialogTableVisible=!0),class:"create_btn"},{default:r(()=>[i("新增收货地址")]),_:1}),l(c,{modelValue:e.dialogTableVisible,"onUpdate:modelValue":o[6]||(o[6]=d=>e.dialogTableVisible=d),title:e.title,width:490},{footer:r(()=>[b("div",G,[l(s,{onClick:o[5]||(o[5]=d=>e.dialogTableVisible=!1)},{default:r(()=>[i("取消")]),_:1}),l(s,{onClick:e.submitForm},{default:r(()=>[i("确定")]),_:1},8,["onClick"])])]),default:r(()=>[l(p,{ref:"ruleFormRef",model:e.formData,"status-icon":"",rules:e.rules,"label-width":"100px"},{default:r(()=>[l(m,{label:"收货人",required:"",prop:"user"},{default:r(()=>[l(v,{modelValue:e.formData.user,"onUpdate:modelValue":o[1]||(o[1]=d=>e.formData.user=d),placeholder:"用户名",style:{width:"300px"}},null,8,["modelValue"])]),_:1}),l(m,{label:"收货地址",required:"",prop:"receivingAddress"},{default:r(()=>[l(A,{modelValue:e.formData.receivingAddress,"onUpdate:modelValue":o[2]||(o[2]=d=>e.formData.receivingAddress=d),options:e.addressSelectOptions,onChange:f.handleAddress},null,8,["modelValue","options","onChange"])]),_:1}),l(m,{label:"手机号码",required:"",prop:"phoneNumber"},{default:r(()=>[l(v,{modelValue:e.formData.phoneNumber,"onUpdate:modelValue":o[3]||(o[3]=d=>e.formData.phoneNumber=d),placeholder:"手机号",style:{width:"300px"}},null,8,["modelValue"])]),_:1}),l(m,{label:"邮箱地址",required:"",prop:"email"},{default:r(()=>[l(v,{modelValue:e.formData.email,"onUpdate:modelValue":o[4]||(o[4]=d=>e.formData.email=d),style:{width:"300px"}},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"]),(h(!0),w(U,null,F((a=e.store.getters)==null?void 0:a.receivingAddress,d=>(h(),w("div",{key:d.addr_id},[l(t,{addrs:d},null,8,["addrs"])]))),128))])}const W=R(H,[["render",J]]);export{W as default};

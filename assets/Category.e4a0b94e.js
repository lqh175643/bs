import{_ as B,G as D,g as C,c as j}from"./index.744d850d.js";import{r as p,o as d,g as u,F as f,q as k,f as _,t as S,h as N,l as w,j as P,u as q,k as G,y as R,d as y,e as T,m as b,v as U,x as E}from"./vendor.d3eff5ec.js";const V={name:"Category",props:{config:{type:Object,default:()=>({\u54C1\u724C:["\u826F\u54C1\u94FA\u5B50","\u4E09\u53EA\u677E\u9F20","\u767E\u8349\u5473"],\u96F6\u98DF\u7C7B\u578B:["\u4F11\u95F2\u96F6\u98DF","\u8089\u5E72\u8089\u812F","\u997C\u5E72\u86CB\u7CD5","\u575A\u679C\u7092\u8D27","\u871C\u996F\u679C\u5E72","\u5DE7\u514B\u529B"]})}},setup(i,{emit:a}){let l=p(new Set),e={};return{search:function(g){let n=g.target.dataset.index;const s=g.target.innerText;e[n]||(e[n]=new Set),e[n].has(s)?e[n].delete(s):e[n].add(s);let r=[];for(let o in e)r.push([...e[o]].join("|"));r=r.map(o=>{if(o)return"(?=.*?("+o+"))"}).join(""),l.value.has(s)?l.value.delete(s):l.value.add(s),a("barChange",r)},checked:l}}},F={class:"categorybar"},L={class:"parent"},O={class:"son"},M=["data-index"],A={key:0,class:"hr"};function H(i,a,l,e,c,g){return d(),u("div",F,[(d(!0),u(f,null,k(l.config,(n,s,r)=>(d(),u("div",{key:r,class:"wrapper"},[_("div",L,S(s),1),_("div",O,[(d(!0),u(f,null,k(n,o=>(d(),u("span",{key:o,class:N(["son_item",e.checked.has(o)?"checked":""]),"data-index":r,onClick:a[0]||(a[0]=(...h)=>e.search&&e.search(...h))},S(o),11,M))),128)),Object.keys(l.config).length-1!==r?(d(),u("div",A)):w("",!0)])]))),128))])}var J=B(V,[["render",H],["__scopeId","data-v-67e11c6c"]]);const K={name:"Detail",components:{CategoryBar:J,Goods:D},props:{category:{type:String,default:""}},setup(i){const a=P({page:1,limit:30}),l=q(),e=p([]),c=p(decodeURI(window.location.href.split("?")[0].split("/").pop())),g=G(()=>(c.value=decodeURI(window.location.href.split("?")[0].split("/").pop()),C(c.value,a).then(t=>{n.value=Number(t.totalCount),e.value=t.data}).catch(t=>{throw t}),l.currentRoute.value.fullPath)),n=p(0),s=p(1),r=p(30),o=function(t){r.value=t,a.limit=t,a.page=1,m(c.value,a),z()},h=function(t){a.page=t,m(c.value,a),z()},x=function(t){a.searchLimit=t,m(c.value,a)};function m(t,I){C(t,I).then(v=>{n.value=Number(v.totalCount),e.value=v.data}).catch(v=>{throw v})}function z(){let t=null;t=setInterval(()=>{document.documentElement.scrollTop-=500,document.documentElement.scrollTop<=0&&(clearInterval(t),t=null)},50)}return R(()=>{C(c.value,a).then(t=>{n.value=Number(t.totalCount),e.value=t.data}).catch(t=>{throw t})}),{totalCount:n,currentPage:s,handleSizeChange:o,currentSize:r,handleCurrentChange:h,goodsDatas:e,barChange:x,query:a,isBar:j.includes(c),aa:g}}},Q=i=>(U("data-v-2a1dbd7a"),i=i(),E(),i),W={class:"goods"},X={style:{display:"none"}},Y=Q(()=>_("span",null,null,-1)),Z={class:"block"};function $(i,a,l,e,c,g){const n=y("CategoryBar"),s=y("Goods"),r=y("el-pagination");return d(),u(f,null,[e.isBar?(d(),T(n,{key:0,onBarChange:e.barChange},null,8,["onBarChange"])):w("",!0),_("div",W,[(d(!0),u(f,null,k(e.goodsDatas,(o,h)=>(d(),u("div",{key:h,class:"goods_item"},[b(s,{goodsData:o},null,8,["goodsData"])]))),128))]),_("div",X,S(e.aa),1),Y,_("div",Z,[b(r,{currentPage:e.query.page,"onUpdate:currentPage":a[0]||(a[0]=o=>e.query.page=o),"page-size":e.currentSize,"onUpdate:pageSize":a[1]||(a[1]=o=>e.currentSize=o),layout:"total, sizes, prev, pager, next, jumper",total:e.totalCount,"page-sizes":[10,20,30,50,100],"default-page-size":30,onSizeChange:e.handleSizeChange,onCurrentChange:e.handleCurrentChange},null,8,["currentPage","page-size","total","onSizeChange","onCurrentChange"])])],64)}var ae=B(K,[["render",$],["__scopeId","data-v-2a1dbd7a"]]);export{ae as default};

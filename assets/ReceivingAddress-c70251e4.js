import{_ as C,u as R,g as A,i as N,C as w,r as s,o as D,c as h,b as p,B as n,t as b,n as E,e as r,A as a,F as x,E as U,H as y,d as k,R as F}from"./index-0598f3a8.js";import{d as T,b as q}from"./userHome-42eda77e.js";const B={name:"ReceiveAddr",props:{addrs:Object},setup(m){const l=R();let f=A(!1);const e=m.addrs,u=N({user:e.user||"",receivingAddress:w(e.receivingAddress)||"",phoneNumber:e.phoneNumber||"",email:e.email||"",head_add:w(e.receivingAddress).split("/")[0]||"",addr_id:e.addr_id||""});return{formData:u,addrDelete:()=>{T({target:"receivingAddress",val:{addr_id:u.addr_id}}).then(t=>{f.value=!1,U(l),y({message:"删除成功",type:"success",offset:60})},t=>{y({message:"删除失败",type:"error",offset:60})})},dialogVisible:f}}},S={class:"addr_wrapper"},O={class:"header"},I=p("span",null,"是否移除此地址",-1),M={class:"dialog-footer"};function P(m,l,f,e,u,c){const t=s("el-form-item"),g=s("el-form"),i=s("el-button"),V=s("el-dialog");return D(),h(x,null,[p("div",S,[p("div",O,[n(b(e.formData.user+" "+e.formData.head_add)+" ",1),p("i",{class:E(["iconfont","icon-guanbi","float_right"]),onClick:l[0]||(l[0]=v=>e.dialogVisible=!0)})]),r(g,{model:e.formData,class:"form"},{default:a(()=>[r(t,{label:"收货人 :"},{default:a(()=>[n(b(e.formData.user),1)]),_:1}),r(t,{label:"收货地址 :"},{default:a(()=>[n(b(e.formData.receivingAddress),1)]),_:1}),r(t,{label:"电话号码 :"},{default:a(()=>[n(b(e.formData.phoneNumber),1)]),_:1}),r(t,{label:"邮箱 :"},{default:a(()=>[n(b(e.formData.email),1)]),_:1})]),_:1},8,["model"])]),r(V,{modelValue:e.dialogVisible,"onUpdate:modelValue":l[2]||(l[2]=v=>e.dialogVisible=v),title:"确定移除",width:"30%"},{footer:a(()=>[p("span",M,[r(i,{onClick:l[1]||(l[1]=v=>e.dialogVisible=!1)},{default:a(()=>[n("取消")]),_:1}),r(i,{type:"primary",onClick:e.addrDelete},{default:a(()=>[n("确定")]),_:1},8,["onClick"])])]),default:a(()=>[I]),_:1},8,["modelValue"])],64)}const j=C(B,[["render",P]]);const z={name:"ReceivingAddress",components:{ReceiveAddr:j},setup(){let m=A(!1),l=A("新增收货地址");const f=R(),e=F,u=A(),c=N({user:"",receivingAddress:"",phoneNumber:"",email:""});function t(){u.value.validate(_=>{if(_)c.addr_id=Date.now(),q(c).then(d=>{m.value=!1,U(f),console.log(d)},d=>{console.log(d)});else return console.log("error submit!!"),!1})}return{dialogTableVisible:m,title:l,formData:c,rules:{user:[{validator:(_,d,o)=>{d===""?o(new Error("请输入收货人")):o()},trigger:"change"}],receivingAddress:[{validator:(_,d,o)=>{d===""?o(new Error("请选择收货地址")):o()},trigger:"change"}],phoneNumber:[{validator:(_,d,o)=>{d===""?o(new Error("请输入手机号码")):o()},trigger:"change"}],email:[{validator:(_,d,o)=>{d===""?o(new Error("请输入邮箱")):o()},trigger:"change"}]},ruleFormRef:u,submitForm:t,addressSelectOptions:e,store:f}}},H={class:"wrapper_recA"},L={class:"footer"};function G(m,l,f,e,u,c){const t=s("el-button"),g=s("el-input"),i=s("el-form-item"),V=s("el-cascader"),v=s("el-form"),_=s("el-dialog"),d=s("ReceiveAddr");return D(),h("div",H,[r(t,{onClick:l[0]||(l[0]=o=>e.dialogTableVisible=!0),class:"create_btn"},{default:a(()=>[n("新增收货地址")]),_:1}),r(_,{modelValue:e.dialogTableVisible,"onUpdate:modelValue":l[6]||(l[6]=o=>e.dialogTableVisible=o),title:e.title,width:490},{footer:a(()=>[p("div",L,[r(t,{onClick:l[5]||(l[5]=o=>e.dialogTableVisible=!1)},{default:a(()=>[n("取消")]),_:1}),r(t,{onClick:e.submitForm},{default:a(()=>[n("确定")]),_:1},8,["onClick"])])]),default:a(()=>[r(v,{ref:"ruleFormRef",model:e.formData,"status-icon":"",rules:e.rules,"label-width":"100px"},{default:a(()=>[r(i,{label:"收货人",required:"",prop:"user"},{default:a(()=>[r(g,{modelValue:e.formData.user,"onUpdate:modelValue":l[1]||(l[1]=o=>e.formData.user=o),placeholder:"用户名",style:{width:"300px"}},null,8,["modelValue"])]),_:1}),r(i,{label:"收货地址",required:"",prop:"receivingAddress"},{default:a(()=>[r(V,{modelValue:e.formData.receivingAddress,"onUpdate:modelValue":l[2]||(l[2]=o=>e.formData.receivingAddress=o),options:e.addressSelectOptions,onChange:m.handleAddress},null,8,["modelValue","options","onChange"])]),_:1}),r(i,{label:"手机号码",required:"",prop:"phoneNumber"},{default:a(()=>[r(g,{modelValue:e.formData.phoneNumber,"onUpdate:modelValue":l[3]||(l[3]=o=>e.formData.phoneNumber=o),placeholder:"手机号",style:{width:"300px"}},null,8,["modelValue"])]),_:1}),r(i,{label:"邮箱地址",required:"",prop:"email"},{default:a(()=>[r(g,{modelValue:e.formData.email,"onUpdate:modelValue":l[4]||(l[4]=o=>e.formData.email=o),style:{width:"300px"}},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"]),(D(!0),h(x,null,k(e.store.getters?.receivingAddress,o=>(D(),h("div",{key:o.addr_id},[r(d,{addrs:o},null,8,["addrs"])]))),128))])}const Q=C(z,[["render",G]]);export{Q as default};

import{s as h,_ as V,g as w,i as E,a as U,r as _,o as b,c as x,b as m,e as s,A as u,M as F,p as y,q as P}from"./index-4fd5423a.js";function R(n){return h({url:"/register",method:"post",data:n})}const C={name:"Register",setup(n){const l=w(),a=E({user:"",pass:"",phone:"",pass2:"",invitation:""}),o=U();function f(){o.push({path:"/login"})}function g(){const p={user:a.user,pass:a.pass,phone:a.phone,invitation:a.invitation};l.value.validate(t=>{if(t)R(p).then(e=>{console.log(e),e.code==0?F({title:"注册失败",message:e.mes,type:"warning"}):e.code==1&&(F({title:"注册成功",message:"即将跳转到登录界面",type:"success"}),setTimeout(()=>{f()},1e3))},e=>{throw e});else return console.log("error submit!!"),!1})}return{ruleForm:a,rules:{user:[{validator:(p,t,e)=>{t===""?e(new Error("请输入用户名")):e()},trigger:"change"}],phone:[{validator:(p,t,e)=>{t===""?e(new Error("请输入手机号")):e()},trigger:"change"}],pass:[{validator:(p,t,e)=>{t===""?e(new Error("请输入密码")):a.user===""?e(new Error("请先输入用户名")):e()},trigger:"change"}],pass2:[{validator:(p,t,e)=>{t===""?e(new Error("请确认密码")):a.user===""?e(new Error("请先输入用户名")):t!==a.pass?e(new Error("两次密码不一致")):e()},trigger:"blur"}]},ruleFormRef:l,submitForm:g,login:f}}},c=n=>(y("data-v-98ed9c03"),n=n(),P(),n),I={class:"login_wrapper"},B={class:"login_form"},N=c(()=>m("div",{class:"login_form_header"},"欢迎注册",-1)),S=c(()=>m("div",{class:"login_form_line"},null,-1)),q=c(()=>m("div",{class:"login_form_line"},null,-1));function A(n,l,a,o,f,g){const i=_("el-input"),d=_("el-form-item"),v=_("el-form");return b(),x("div",I,[m("div",B,[N,S,s(v,{ref:"ruleFormRef",model:o.ruleForm,"status-icon":"",rules:o.rules,"label-width":"70px",class:"demo-ruleForm"},{default:u(()=>[s(d,{label:"用户名",prop:"user"},{default:u(()=>[s(i,{modelValue:o.ruleForm.user,"onUpdate:modelValue":l[0]||(l[0]=r=>o.ruleForm.user=r),placeholder:"用户名",autocomplete:"off"},null,8,["modelValue"])]),_:1}),s(d,{label:"手机号",prop:"phone"},{default:u(()=>[s(i,{modelValue:o.ruleForm.phone,"onUpdate:modelValue":l[1]||(l[1]=r=>o.ruleForm.phone=r),placeholder:"手机号",autocomplete:"off"},null,8,["modelValue"])]),_:1}),s(d,{label:"密码",prop:"pass"},{default:u(()=>[s(i,{modelValue:o.ruleForm.pass,"onUpdate:modelValue":l[2]||(l[2]=r=>o.ruleForm.pass=r),type:"password",autocomplete:"off"},null,8,["modelValue"])]),_:1}),s(d,{label:"确认密码",prop:"pass2"},{default:u(()=>[s(i,{modelValue:o.ruleForm.pass2,"onUpdate:modelValue":l[3]||(l[3]=r=>o.ruleForm.pass2=r),type:"password",autocomplete:"off"},null,8,["modelValue"])]),_:1}),s(d,{label:"管理码"},{default:u(()=>[s(i,{modelValue:o.ruleForm.invitation,"onUpdate:modelValue":l[4]||(l[4]=r=>o.ruleForm.invitation=r),placeholder:"管理员填写",autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"]),m("div",{class:"login_btn",onClick:l[5]||(l[5]=(...r)=>o.submitForm&&o.submitForm(...r))},"注        册"),q,m("div",{class:"register",onClick:l[6]||(l[6]=(...r)=>o.login&&o.login(...r))},"已有帐号？登录")])])}const T=V(C,[["render",A],["__scopeId","data-v-98ed9c03"]]);export{T as default};

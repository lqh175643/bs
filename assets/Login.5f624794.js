import{_ as y,l as E,s as x,j as C}from"./index.744d850d.js";import{u as P,r as h,j as B,d as g,o as m,g as _,f as n,t as w,m as d,w as p,E as V,v as I,x as S,e as b}from"./vendor.d3eff5ec.js";const L={name:"Login",setup(a){const r=P(),u=h(),e=B({user:"",pass:"",phone:""}),c=h(!1);function v(){u.value.validate(t=>{if(t){const l={user:e.user,pass:window.btoa(e.pass)};E(l).then(o=>{if(o.code==1){if(o.token)x("token",o.token);else throw"\u83B7\u53D6token\u5931\u8D25";r.push({path:"/home"})}else V({title:"\u767B\u5F55\u5931\u8D25",message:o.mes,type:"warning"})},o=>{console.log(o)})}else return console.log("error submit!!"),!1})}function i(){u.value.validate(t=>{if(t){const l={user:e.user,phone:window.btoa(e.phone)};C(l).then(o=>{V({title:"\u91CD\u7F6E\u6210\u529F",message:o.mes,type:"success"})},o=>{console.log(o)})}else return console.log("error submit!!"),!1})}return{ruleForm:e,rules:{user:[{validator:(t,l,o)=>{l===""?o(new Error("\u8BF7\u8F93\u5165\u7528\u6237\u540D")):o()},trigger:"change"}],pass:[{validator:(t,l,o)=>{l===""?o(new Error("\u8BF7\u8F93\u5165\u5BC6\u7801")):e.user===""?o(new Error("\u8BF7\u5148\u8F93\u5165\u7528\u6237\u540D")):o()},trigger:"change"}],phone:[{validator:(t,l,o)=>{l===""?o(new Error("\u8BF7\u8F93\u5165\u624B\u673A\u53F7")):e.user===""?o(new Error("\u8BF7\u5148\u8F93\u5165\u7528\u6237\u540D")):o()},trigger:"change"}]},ruleFormRef:u,submitForm:v,forgetForm:i,register:function(){r.push({path:"/register"})},isForget:c}}},k=a=>(I("data-v-4f811fdb"),a=a(),S(),a),N={class:"login_wrapper"},R={class:"login_form"},U={class:"login_form_header"},j=k(()=>n("div",{class:"login_form_line"},null,-1)),D=k(()=>n("div",{class:"login_form_line"},null,-1));function q(a,r,u,e,c,v){const i=g("el-input"),f=g("el-form-item"),F=g("el-form");return m(),_("div",N,[n("div",R,[n("div",U,w(e.isForget?"\u5BC6\u7801\u91CD\u7F6E":"\u6B22\u8FCE\u767B\u9646"),1),j,d(F,{ref:"ruleFormRef",model:e.ruleForm,"status-icon":"",rules:e.rules,"label-width":"60px",class:"demo-ruleForm"},{default:p(()=>[d(f,{label:"\u7528\u6237\u540D",prop:"user"},{default:p(()=>[d(i,{modelValue:e.ruleForm.user,"onUpdate:modelValue":r[0]||(r[0]=s=>e.ruleForm.user=s),placeholder:"\u7528\u6237\u540D",autocomplete:"off"},null,8,["modelValue"])]),_:1}),e.isForget?(m(),b(f,{key:1,label:"\u624B\u673A\u53F7",prop:"phone"},{default:p(()=>[d(i,{modelValue:e.ruleForm.phone,"onUpdate:modelValue":r[2]||(r[2]=s=>e.ruleForm.phone=s),autocomplete:"off"},null,8,["modelValue"])]),_:1})):(m(),b(f,{key:0,label:"\u5BC6\u7801",prop:"pass"},{default:p(()=>[d(i,{modelValue:e.ruleForm.pass,"onUpdate:modelValue":r[1]||(r[1]=s=>e.ruleForm.pass=s),type:"password",autocomplete:"off"},null,8,["modelValue"])]),_:1}))]),_:1},8,["model","rules"]),e.isForget?(m(),_("p",{key:0,class:"login_btn",onClick:r[3]||(r[3]=(...s)=>e.forgetForm&&e.forgetForm(...s))},"\u91CD\u7F6E")):(m(),_("p",{key:1,class:"login_btn",onClick:r[4]||(r[4]=(...s)=>e.submitForm&&e.submitForm(...s))},"\u767B\u5F55")),D,n("span",{class:"forget",onClick:r[5]||(r[5]=s=>e.isForget=!e.isForget)},w(e.isForget?"\u7ACB\u5373\u767B\u5F55":"\u5BC6\u7801\u91CD\u7F6E"),1),n("span",{class:"register",onClick:r[6]||(r[6]=(...s)=>e.register&&e.register(...s))},"\u7ACB\u5373\u6CE8\u518C")])])}var H=y(L,[["render",q],["__scopeId","data-v-4f811fdb"]]);export{H as default};

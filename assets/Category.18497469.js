import{_ as S,G as j,g as C,c as I}from"./index.7834eb9a.js";import{r as g,o as i,g as u,F as v,p as k,f as _,t as z,h as N,l as w,j as P,u as G,k as R,y as T,d as y,e as U,m as b}from"./vendor.dc59bbfd.js";const q={name:"Category",props:{config:{type:Object,default:()=>({\u54C1\u724C:["\u826F\u54C1\u94FA\u5B50","\u4E09\u53EA\u677E\u9F20","\u767E\u8349\u5473"],\u96F6\u98DF\u7C7B\u578B:["\u4F11\u95F2\u96F6\u98DF","\u8089\u5E72\u8089\u812F","\u997C\u5E72\u86CB\u7CD5","\u575A\u679C\u7092\u8D27","\u871C\u996F\u679C\u5E72","\u5DE7\u514B\u529B"]})}},setup(f,{emit:a}){let l=g(new Set),e={};return{search:function(d){let o=d.target.dataset.index;const s=d.target.innerText;e[o]||(e[o]=new Set),e[o].has(s)?e[o].delete(s):e[o].add(s);let r=[];for(let n in e)r.push([...e[n]].join("|"));r=r.map(n=>{if(n)return"(?=.*?("+n+"))"}).join(""),l.value.has(s)?l.value.delete(s):l.value.add(s),a("barChange",r)},checked:l}}},E={class:"categorybar"},V={class:"parent"},F={class:"son"},L=["data-index"],O={key:0,class:"hr"};function M(f,a,l,e,c,d){return i(),u("div",E,[(i(!0),u(v,null,k(l.config,(o,s,r)=>(i(),u("div",{key:r,class:"wrapper"},[_("div",V,z(s),1),_("div",F,[(i(!0),u(v,null,k(o,n=>(i(),u("span",{key:n,class:N(["son_item",e.checked.has(n)?"checked":""]),"data-index":r,onClick:a[0]||(a[0]=(...p)=>e.search&&e.search(...p))},z(n),11,L))),128)),Object.keys(l.config).length-1!==r?(i(),u("div",O)):w("",!0)])]))),128))])}var A=S(q,[["render",M],["__scopeId","data-v-67e11c6c"]]);const H={name:"Detail",components:{CategoryBar:A,Goods:j},props:{category:{type:String,default:""}},setup(f){const a=P({page:1,limit:30}),l=G(),e=g([]),c=g(decodeURI(window.location.href.split("?")[0].split("/").pop())),d=R(()=>(c.value=decodeURI(window.location.href.split("?")[0].split("/").pop()),C(c.value,a).then(t=>{o.value=Number(t.totalCount),e.value=t.data}).catch(t=>{throw t}),l.currentRoute.value.fullPath)),o=g(0),s=g(1),r=g(30),n=function(t){r.value=t,a.limit=t,a.page=1,m(c.value,a),B()},p=function(t){a.page=t,m(c.value,a),B()},x=function(t){a.searchLimit=t,m(c.value,a)};function m(t,D){C(t,D).then(h=>{o.value=Number(h.totalCount),e.value=h.data}).catch(h=>{throw h})}function B(){let t=null;t=setInterval(()=>{document.documentElement.scrollTop-=500,document.documentElement.scrollTop<=0&&(clearInterval(t),t=null)},50)}return T(()=>{C(c.value,a).then(t=>{o.value=Number(t.totalCount),e.value=t.data}).catch(t=>{throw t})}),{totalCount:o,currentPage:s,handleSizeChange:n,currentSize:r,handleCurrentChange:p,goodsDatas:e,barChange:x,query:a,isBar:I.includes(c),aa:d}}},J={class:"goods"},K={style:{display:"none"}},Q={class:"block"};function W(f,a,l,e,c,d){const o=y("CategoryBar"),s=y("Goods"),r=y("el-pagination");return i(),u(v,null,[e.isBar?(i(),U(o,{key:0,onBarChange:e.barChange},null,8,["onBarChange"])):w("",!0),_("div",J,[(i(!0),u(v,null,k(e.goodsDatas,(n,p)=>(i(),u("div",{key:p,class:"goods_item"},[b(s,{goodsData:n},null,8,["goodsData"])]))),128))]),_("div",K,z(e.aa),1),_("div",Q,[b(r,{currentPage:e.query.page,"onUpdate:currentPage":a[0]||(a[0]=n=>e.query.page=n),"page-size":e.currentSize,"onUpdate:page-size":a[1]||(a[1]=n=>e.currentSize=n),layout:"total, sizes, prev, pager, next, jumper",total:e.totalCount,"page-sizes":[10,20,30,50,100],"default-page-size":30,onSizeChange:e.handleSizeChange,onCurrentChange:e.handleCurrentChange},null,8,["currentPage","page-size","total","onSizeChange","onCurrentChange"])])],64)}var Z=S(H,[["render",W],["__scopeId","data-v-71ee340e"]]);export{Z as default};

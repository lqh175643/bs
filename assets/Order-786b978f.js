import{_ as V,u as x,j as C,g as y,y as I,r as u,o as i,c as n,b as t,e as o,A as l,F as m,E as B,d as v,t as _,B as h,p as S,q as N}from"./index-0598f3a8.js";import{d as O}from"./userHome-42eda77e.js";const P={name:"Order",setup(c){const s=x(),w=C(()=>s.getters.shopHistory),a=y(!1),f=y("");return{tableData:w,formatDate:I,orderDelete:b=>{a.value=!0,f.value=b.row.did},dialogVisible:a,determineDelete:()=>{O({val:{did:f.value},target:"shopHistory"}).then(()=>{B(s)}).finally(()=>{a.value=!1})}}}},T=c=>(S("data-v-b34b10ef"),c=c(),N(),c),U={class:"table_wrapper"},A={class:"goods_wrapper"},E=["src"],F={class:"middle"},H={class:"middle"},j={class:"middle"},q={class:"operation_wrapper"},L=["onClick"],z=T(()=>t("span",null,"是否移除此商品",-1)),G={class:"dialog-footer"};function J(c,s,w,a,f,D){const d=u("el-table-column"),b=u("el-table"),g=u("el-button"),k=u("el-dialog");return i(),n(m,null,[t("div",U,[o(b,{data:a.tableData,style:{width:"100%"},"max-height":"700",stripe:""},{default:l(()=>[o(d,{fixed:"",label:"商品信息",width:"320"},{default:l(e=>[(i(!0),n(m,null,v(e.row.goods,(r,p)=>(i(),n("div",{key:p},[t("div",A,[t("img",{src:r.img,alt:"商品图片"},null,8,E),t("div",null,_(r.des),1)])]))),128))]),_:1}),o(d,{prop:"price",label:"单价(元)",width:"100"},{default:l(e=>[(i(!0),n(m,null,v(e.row.goods,(r,p)=>(i(),n("div",{key:p},[t("div",F,[t("div",null,_(r.price),1)])]))),128))]),_:1}),o(d,{prop:"count",label:"数量",width:"60"},{default:l(e=>[(i(!0),n(m,null,v(e.row.goods,(r,p)=>(i(),n("div",{key:p},[t("div",H,[t("div",null,_(r.count),1)])]))),128))]),_:1}),o(d,{label:"折扣",width:"120"},{default:l(e=>[t("div",null,_("校园豆:￥"+e.row.campusBean),1),t("div",null,_("优惠券:￥"+(e.row.coupon.reduce||0)),1)]),_:1}),o(d,{prop:"finalPrice",label:"实付金额",width:"100"}),o(d,{prop:"did",label:"订单号",width:"200"}),o(d,{prop:"generateTime",label:"创建时间",width:"120"},{default:l(e=>[t("div",j,[t("div",null,_(a.formatDate(e.row.generateTime)),1)])]),_:1}),o(d,{prop:"isPay",label:"交易状态",width:"100"},{default:l(e=>[h(_(e.row.isPay?"已支付":"未支付"),1)]),_:1}),o(d,{label:"操作"},{default:l(e=>[t("div",q,[t("div",{onClick:r=>a.orderDelete(e)},"删除",8,L)])]),_:1})]),_:1},8,["data"])]),o(k,{modelValue:a.dialogVisible,"onUpdate:modelValue":s[1]||(s[1]=e=>a.dialogVisible=e),title:"确定移除",width:"30%"},{footer:l(()=>[t("span",G,[o(g,{onClick:s[0]||(s[0]=e=>a.dialogVisible=!1)},{default:l(()=>[h("取消")]),_:1}),o(g,{type:"primary",onClick:a.determineDelete},{default:l(()=>[h("确定")]),_:1},8,["onClick"])])]),default:l(()=>[z]),_:1},8,["modelValue"])],64)}const Q=V(P,[["render",J],["__scopeId","data-v-b34b10ef"]]);export{Q as default};
